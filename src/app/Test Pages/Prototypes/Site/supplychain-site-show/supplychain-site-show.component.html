<div fcidMetadataBinding [domain]=this.gridDomain [context]="'Site.Show'"

[serviceUrl]="serviceURL" [apiVersion]="'api/v1/'" [isTest]='false'>
<div class="container-fluid" *ngIf="showHeader">
  <div class="row" *fcidVisible="'admin'">
    <div class="col-md-12" style="padding:0.5em 2em;">
      <h1>Client {{clientId}}: {{clientName}}</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" fcidContextMenuBinding [clientId]="clientId" *fcidVisible="'admin'">
      <fcid-menu></fcid-menu>
    </div>
  </div>
</div>
<div class="row col-md-12" style="margin:10px 0 10px 0;">
  <div class="offset-md-11 col-md-1">
  <button class="btn-sm" id="siteButton" [disabled]="siteOpened" kendoButton (click)="openSiteInsertWindow()">
      <fcid-form-label-control fcidFormLabelBinding [field]="'addSite'" [onlyText]="true" (labelText)="onAddSiteTextCompleted($event)"></fcid-form-label-control>
  </button>
  </div>
</div>
<kendo-grid id="sitesGrid" appSitesBinding [sortable]="{
    mode: 'multiple'
    }"
  [pageSize]="10" [skip]="0" [pageable]="true" [filterable]="true" [filter]="filter">

  <kendo-grid-column field="siteId" fcidColumnBinding filter='numeric'>
    <ng-template kendoGridHeaderTemplate>
      <fcid-column-header-control  fcidColumnHeaderBinding [field]="'siteId'"></fcid-column-header-control>
    </ng-template>
    <ng-template kendoGridCellTemplate let-dataItem>
      <a [routerLink]="['/accounts/', dataItem.clientId, 'sites', 'edit', dataItem.siteId]">{{dataItem.siteId}}</a>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column field="siteName" fcidColumnBinding filter="text">
    <ng-template kendoGridHeaderTemplate>
      <fcid-column-header-control  fcidColumnHeaderBinding [field]="'siteName'"></fcid-column-header-control>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column field="siteType" fcidColumnBinding filter="text">
    <ng-template kendoGridHeaderTemplate>
      <fcid-column-header-control  fcidColumnHeaderBinding [field]="'siteType'"></fcid-column-header-control>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column field="city" fcidColumnBinding filter="text">
    <ng-template kendoGridHeaderTemplate>
      <fcid-column-header-control  fcidColumnHeaderBinding [field]="'city'"></fcid-column-header-control>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column field="state" fcidColumnBinding filter="text">
    <ng-template kendoGridHeaderTemplate>
      <fcid-column-header-control  fcidColumnHeaderBinding [field]="'state'"></fcid-column-header-control>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column field="country" fcidColumnBinding filter="text">
    <ng-template kendoGridHeaderTemplate>
      <fcid-column-header-control  fcidColumnHeaderBinding [field]="'country'"></fcid-column-header-control>
    </ng-template>
  </kendo-grid-column>
  <kendo-grid-column field="postalCode" fcidColumnBinding filter="text">
      <ng-template kendoGridHeaderTemplate>
        <fcid-column-header-control  fcidColumnHeaderBinding [field]="'postalCode'"></fcid-column-header-control>
      </ng-template>
    </kendo-grid-column>
</kendo-grid>

<div kendoWindowContainer *ngIf="onShow"></div>
</div>
